<loader *ngIf="loading"></loader>

<div class="app-container" *ngIf="!loading">
  <div class="row">
    <div class="col-md-9 my-auto">
      <h2>Savings Calculator</h2>
    </div>
  </div>

  <div class="card card-custom">
    <div class="row">
      <div class="col-md-12">
        <div class="card-heading">Actual Consumption</div>
      </div>
      <div class="row">
        <div
          class="col-md-3 donut-legends"
          *ngFor="let donutLegend of donutLegends"
        >
          <div class="rectangle-position">
            <div
              class="rectangle"
              [style.backgroundColor]="donutLegend.color"
            ></div>
          </div>
          <div class="legend-text">{{ donutLegend.text }}</div>
        </div>
      </div>
      <div class="col-md-4 text-center">
        <app-donut-chart [total]="savingsResponseData.total_cost" [data]="savingsResponseData.values_cost"></app-donut-chart>
        <div class="donut-text">Cost (£)</div>
      </div>
      <div class="col-md-4 text-center">
        <app-donut-chart [total]="savingsResponseData.total_consumption" [data]="savingsResponseData.values_consumption"></app-donut-chart>
        <div class="donut-text">Consumption (kWh)</div>
      </div>
      <div class="col-md-4 text-center">
        <app-donut-chart [total]="savingsResponseData.total_c02" [data]="savingsResponseData.values_c02"></app-donut-chart>
        <div class="donut-text">Emission (kg-CO2)</div>
      </div>
    </div>
  </div>


  <div class="card card-custom">
    <div class="row">
      <div class="col-md-12">
        <div class="card-heading">Savings</div>
      </div>
      <div class="row">
        <div class="col-md-3">
          <p class="percent" [style.color]="donutLegends[0].color">Preparatory Hours</p>
          <div class="input-group mb-3">
            <input type="tel" maxlength="2" (keyup)="onUpdateSavings($event, 0)">
            <div class="input-group-append">
              <span class="input-group-text">%</span>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <p class="percent" [style.color]="donutLegends[1].color">Operational Hours</p>
          <div class="input-group mb-3">
            <input  type="tel" maxlength="2" (keyup)="onUpdateSavings($event, 1)">
            <div class="input-group-append">
              <span class="input-group-text">%</span>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <p class="percent" [style.color]="donutLegends[2].color">Non Operational Hours</p>
          <div class="input-group mb-3">
            <input  type="tel" maxlength="2" (keyup)="onUpdateSavings($event, 2)">
            <div class="input-group-append">
              <span class="input-group-text">%</span>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <p class="percent" [style.color]="donutLegends[3].color">Closed Hours</p>
          <div class="input-group mb-3">
            <input  type="tel" maxlength="2" (keyup)="onUpdateSavings($event, 3)">
            <div class="input-group-append">
              <span class="input-group-text">%</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card card-custom">
    <div class="row">
      <div class="col-md-12">
        <div class="card-heading">Projected Consumption</div>
      </div>
      <div class="row">
        <div
          class="col-md-3 donut-legends"
          *ngFor="let donutLegend of donutLegends"
        >
          <div class="rectangle-position">
            <div
              class="rectangle"
              [style.backgroundColor]="donutLegend.color"
            ></div>
          </div>
          <div class="legend-text">{{ donutLegend.text }}</div>
        </div>
      </div>
      <div class="col-md-4 text-center">
        <app-donut-chart [total]="savingsProjectedData.total_cost" [data]="savingsProjectedData.values_cost"></app-donut-chart>
        <div class="donut-text">Cost (£)</div>
      </div>
      <div class="col-md-4 text-center">
        <app-donut-chart [total]="savingsProjectedData.total_consumption" [data]="savingsProjectedData.values_consumption"></app-donut-chart>
        <div class="donut-text">Consumption (kWh)</div>
      </div>
      <div class="col-md-4 text-center">
        <app-donut-chart [total]="savingsProjectedData.total_c02" [data]="savingsProjectedData.values_c02"></app-donut-chart>
        <div class="donut-text">Emission (kg-CO2)</div>
      </div>
    </div>
    <div>
      <div class="card-heading mt-5">In Other Words</div>
      <div class="row">
        <div class="col-md-4">
          <div class="alternate">
              <img width="50px" src="/assets/icons/icon-petrol.svg">
              <p class="my-auto">{{ totalSavings.petrol }} litres of Petrol saved</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="alternate">
              <img width="50px" src="/assets/icons/icon-car.svg">
              <p class="my-auto">{{ totalSavings.distance }} km of road trip gained</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="alternate">
              <img width="50px" src="/assets/icons/icon-smartphones.svg">
              <p class="my-auto">{{ totalSavings.smartphone }} smartphones charged</p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <div class="alternate">
              <img width="50px" src="/assets/icons/icon-plant.svg">
              <p class="my-auto">{{ totalSavings.trees }} full-grown trees planted</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="alternate">
              <img width="50px" src="/assets/icons/icon-electricity.svg">
              <p class="my-auto">{{ totalSavings.electricity }} days of free electricity for your home</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="alternate">
              <img width="50px" src="/assets/icons/icon-trash.svg">
              <p class="my-auto">{{ totalSavings.trash }} days of no taking out the trash</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
